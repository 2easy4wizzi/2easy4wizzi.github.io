var languageNameMapping = [];
languageNameMapping["אבו בסמה"] = ["אבו בסמה","Abu Bosma"];
languageNameMapping["אל-בטוף"] = ["אל-בטוף","Al-Batuf"];
languageNameMapping["אלונה"] = ["אלונה","Alona"];
languageNameMapping["בוסתן אל-מרג'"] = ["בוסתן אל-מרג'","Bustan Al Marg"];
languageNameMapping["בני שמעון"] = ["בני שמעון","Bney Shimon"];
languageNameMapping["גדרות"] = ["גדרות","Gderot"];
languageNameMapping["גולן"] = ["גולן","Golan"];
languageNameMapping["גוש עציון"] = ["גוש עציון","Gush Atsiyon"];
languageNameMapping["דרום השרון"] = ["דרום השרון","Drom HaSharon"];
languageNameMapping["זבולון"] = ["זבולון","Zvulun"];
languageNameMapping["חבל אילות"] = ["חבל אילות","Hevel Elot"];
languageNameMapping["חבל מודיעין"] = ["חבל מודיעין","Hevel Modi'in"];
languageNameMapping["חוף הכרמל"] = ["חוף הכרמל","Hof HaCarmel"];
languageNameMapping["חוף השרון"] = ["חוף השרון","Hof HaSharon"];
languageNameMapping["מבואות החרמון"] = ["מבואות החרמון","Mevo'ot HaHermon"];
languageNameMapping["מטה אשר"] = ["מטה אשר","Mate Asher"];
languageNameMapping["מטה בנימין"] = ["מטה בנימין","Mate Binyamin"];
languageNameMapping["מטה יהודה"] = ["מטה יהודה","Mate Yehuda"];
languageNameMapping["מעלה יוסף"] = ["מעלה יוסף","Ma'ale Yosef"];
languageNameMapping["מרום הגליל"] = ["מרום הגליל","Marom HaGalil"];
languageNameMapping["מרחבים"] = ["מרחבים","Merhavim"];
languageNameMapping["משגב"] = ["משגב","Misgav"];
languageNameMapping["עמק הירדן"] = ["עמק הירדן","Emek HaYarden"];
languageNameMapping["עמק המעיינות"] = ["עמק המעיינות","Emek HaMa'ayanot"];
languageNameMapping["עמק חפר"] = ["עמק חפר","Emek Hefer"];
languageNameMapping["עמק יזרעאל"] = ["עמק יזרעאל","Emek Izrael"];
languageNameMapping["עמק לוד"] = ["עמק לוד","Emek Lod"];
languageNameMapping["שדות נגב"] = ["שדות נגב","Sdot Negev"];
languageNameMapping["שער הנגב"] = ["שער הנגב","Sha'ar HaNegev"];
languageNameMapping["אבו גוש"] = ["אבו גוש","Abu Gush"];
languageNameMapping["אבו סנאן"] = ["אבו סנאן","Abu Snan"];
languageNameMapping["אבן יהודה"] = ["אבן יהודה","Even Yehuda"];
languageNameMapping["אום אל-פחם"] = ["אום אל-פחם","Um El Fahem"];
languageNameMapping["אופקים"] = ["אופקים","Ofakim"];
languageNameMapping["אור יהודה"] = ["אור יהודה","Or Yehuda"];
languageNameMapping["אור עקיבא"] = ["אור עקיבא","Or Akiva"];
languageNameMapping["אורנית"] = ["אורנית","Oranit"];
languageNameMapping["אזור"] = ["אזור","Azur"];
languageNameMapping["אילת"] = ["אילת","Elat"];
languageNameMapping["אכסאל"] = ["אכסאל","Ihsel"];
languageNameMapping["אליכין"] = ["אליכין","AliHin"];
languageNameMapping["אלעד"] = ["אלעד","Elad"];
languageNameMapping["אלפי מנשה"] = ["אלפי מנשה","Alfey Menashe"];
languageNameMapping["אלקנה"] = ["אלקנה","Elkana"];
languageNameMapping["אעבלין"] = ["אעבלין","A'eblin"];
languageNameMapping["אפרת"] = ["אפרת","Efrat"];
languageNameMapping["אריאל"] = ["אריאל","Ariel"];
languageNameMapping["אשדוד"] = ["אשדוד","Ashdod"];
languageNameMapping["אשקלון"] = ["אשקלון","Ashkelon"];
languageNameMapping["באקה אל-גרביה"] = ["באקה אל-גרביה","Bake El Garbiya"];
languageNameMapping["באר טוביה"] = ["באר טוביה","Be'er Tuviya"];
languageNameMapping["באר יעקב"] = ["באר יעקב","Be'er Ya'akov"];
languageNameMapping["באר שבע"] = ["באר שבע","Be'er Sheva"];
languageNameMapping["בועיינה-נוג'ידאת"] = ["בועיינה-נוג'ידאת","Buina-Nojidath"];
languageNameMapping["בוקעאתא"] = ["בוקעאתא","Buka'ata"];
languageNameMapping["ביר אל-מכסור"] = ["ביר אל-מכסור","Bir El-Maksur"];
languageNameMapping["בית אל"] = ["בית אל","Bet El"];
languageNameMapping["בית אריה"] = ["בית אריה","Bet Arye"];
languageNameMapping["בית ג'ן"] = ["בית ג'ן","Bet Jan"];
languageNameMapping["בית דגן"] = ["בית דגן","Bet Dagan"];
languageNameMapping["בית שאן"] = ["בית שאן","Bet She'an"];
languageNameMapping["בית שמש"] = ["בית שמש","Bet Shemesh"];
languageNameMapping["ביתר עילית"] = ["ביתר עילית","Beytar Elit"];
languageNameMapping["בני ברק"] = ["בני ברק","Bney Brak"];
languageNameMapping["בני עי\"ש"] = ["בני עי\"ש","Beny Aish"];
languageNameMapping["בנימינה-גבעת עדה"] = ["בנימינה-גבעת עדה","Binyamina-Givat Ada"];
languageNameMapping["בסמ\"ה"] = ["בסמ\"ה","Bosma"];
languageNameMapping["בסמת טבעון"] = ["בסמת טבעון","Bosmat Tivon"];
languageNameMapping["בענה"] = ["בענה","Ba'ana"];
languageNameMapping["בת ים"] = ["בת ים","Bat Yam"];
languageNameMapping["ג'דיידה-מכר"] = ["ג'דיידה-מכר","Gedayda-Maker"];
languageNameMapping["ג'ולס"] = ["ג'ולס","Juls"];
languageNameMapping["ג'לג'וליה"] = ["ג'לג'וליה","Jaljulya"];
languageNameMapping["ג'סר א-זרקא"] = ["ג'סר א-זרקא","Jaser A-Zarka"];
languageNameMapping["ג'ש (גוש חלב)"] = ["ג'ש (גוש חלב)","Jes(Gush Halav)"];
languageNameMapping["ג'ת"] = ["ג'ת","Jeth"];
languageNameMapping["גבעת זאב"] = ["גבעת זאב","Givat Ze'ev"];
languageNameMapping["גבעת שמואל"] = ["גבעת שמואל","Givat Shmuel"];
languageNameMapping["גבעתיים"] = ["גבעתיים","Givataim"];
languageNameMapping["גדרה"] = ["גדרה","Gedera"];
languageNameMapping["גזר"] = ["גזר","Gezer"];
languageNameMapping["גן יבנה"] = ["גן יבנה","Gan Yavne"];
languageNameMapping["גני תקווה"] = ["גני תקווה","Ganey Tikva"];
languageNameMapping["דאלית אל-כרמל"] = ["דאלית אל-כרמל","Dalyat Al-Carmel"];
languageNameMapping["דבוריה"] = ["דבוריה","Dvorya"];
languageNameMapping["דייר אל-אסד"] = ["דייר אל-אסד","Dir Al-Asad"];
languageNameMapping["דייר חנא"] = ["דייר חנא","Dir Hana"];
languageNameMapping["דימונה"] = ["דימונה","Dimona"];
languageNameMapping["הוד השרון"] = ["הוד השרון","Hod HaSharon"];
languageNameMapping["הר אדר"] = ["הר אדר","Har Eder"];
languageNameMapping["הרצליה"] = ["הרצליה","Herzeliya"];
languageNameMapping["זכרון יעקב"] = ["זכרון יעקב","Zihron Ya'akov"];
languageNameMapping["זמר"] = ["זמר","Zemer"];
languageNameMapping["זרזיר"] = ["זרזיר","Zarzir"];
languageNameMapping["חברון"] = ["חברון","Hevron"];
languageNameMapping["חדרה"] = ["חדרה","Hadera"];
languageNameMapping["חולון"] = ["חולון","Hulon"];
languageNameMapping["חורה"] = ["חורה","Hora"];
languageNameMapping["חורפיש"] = ["חורפיש","Horpish"];
languageNameMapping["חיפה"] = ["חיפה","Haifa"];
languageNameMapping["חצור הגלילית"] = ["חצור הגלילית","Hatsor HaGlilot"];
languageNameMapping["טבריה"] = ["טבריה","Tverya"];
languageNameMapping["טורעאן"] = ["טורעאן","Turan"];
languageNameMapping["טייבה"] = ["טייבה","Taybe"];
languageNameMapping["טירה"] = ["טירה","Tira"];
languageNameMapping["טירת כרמל"] = ["טירת כרמל","Tirat HaCarmel"];
languageNameMapping["טמרה"] = ["טמרה","Tamra"];
languageNameMapping["יאנוח-ג'ת"] = ["יאנוח-ג'ת","Yanuh-Jeth"];
languageNameMapping["יבנאל"] = ["יבנאל","Yavniel"];
languageNameMapping["יבנה"] = ["יבנה","Yavne"];
languageNameMapping["יהוד-מונוסון"] = ["יהוד-מונוסון","Yahud-Monsun"];
languageNameMapping["יסוד המעלה"] = ["יסוד המעלה","Yesod HaMa'ala"];
languageNameMapping["יפיע"] = ["יפיע","Yafia"];
languageNameMapping["יקנעם עילית"] = ["יקנעם עילית","Yokneam Elit"];
languageNameMapping["ירוחם"] = ["ירוחם","Yeruham"];
languageNameMapping["ירושלים"] = ["ירושלים","Jerusalem"];
languageNameMapping["ירכא"] = ["ירכא","Yarka"];
languageNameMapping["כאבול"] = ["כאבול","Kabul"];
languageNameMapping["כאוכב אבו אל-היג'"] = ["כאוכב אבו אל-היג'","Kaukev Abu Al-Hij"];
languageNameMapping["כוכב יאיר"] = ["כוכב יאיר","Kohav Yair"];
languageNameMapping["כסיפה"] = ["כסיפה","Ksifa"];
languageNameMapping["כסרא-סמיע"] = ["כסרא-סמיע","Kasra-Samia"];
languageNameMapping["כעביה-טבאש-חג'אג'"] = ["כעביה-טבאש-חג'אג'","Kabiya-Tbash=Hajaj"];
languageNameMapping["כפר ברא"] = ["כפר ברא","Kfar Bara"];
languageNameMapping["כפר ורדים"] = ["כפר ורדים","Kfar Vradim"];
languageNameMapping["כפר יאסיף"] = ["כפר יאסיף","Kfar Yasif"];
languageNameMapping["כפר יונה"] = ["כפר יונה","Kfar Yona"];
languageNameMapping["כפר כמא"] = ["כפר כמא","Kfar Kama"];
languageNameMapping["כפר כנא"] = ["כפר כנא","Kfar Kana"];
languageNameMapping["כפר מנדא"] = ["כפר מנדא","Kfar Manda"];
languageNameMapping["כפר סבא"] = ["כפר סבא","Kfar Saba"];
languageNameMapping["כפר קאסם"] = ["כפר קאסם","Kfar Kasem"];
languageNameMapping["כפר קרע"] = ["כפר קרע","Kfar Kara"];
languageNameMapping["כפר שמריהו"] = ["כפר שמריהו","Kfar Smaryahu"];
languageNameMapping["כפר תבור"] = ["כפר תבור","Kfar Tavor"];
languageNameMapping["כרמיאל"] = ["כרמיאל","Karmiel"];
languageNameMapping["להבים"] = ["להבים","Lehavim"];
languageNameMapping["לוד"] = ["לוד","Lod"];
languageNameMapping["לכיש"] = ["לכיש","Lakish"];
languageNameMapping["לקיה"] = ["לקיה","Lakiya"];
languageNameMapping["מבשרת ציון"] = ["מבשרת ציון","Mevasrat tsion"];
languageNameMapping["מג'ד אל-כרום"] = ["מג'ד אל-כרום","Magd Al-Krom"];
languageNameMapping["מג'דל שמס"] = ["מג'דל שמס","Magd Shams"];
languageNameMapping["מגאר"] = ["מגאר","Megar"];
languageNameMapping["מגדל"] = ["מגדל","Migdal"];
languageNameMapping["מגדל העמק"] = ["מגדל העמק","Migdal HaEmek"];
languageNameMapping["מגידו"] = ["מגידו","Megido"];
languageNameMapping["מודיעין-מכבים-רעות"] = ["מודיעין-מכבים-רעות","Modi'in-Makabim-Reut"];
languageNameMapping["מודיעין עילית"] = ["מודיעין עילית","Modi'in Elit"];
languageNameMapping["מזכרת בתיה"] = ["מזכרת בתיה","Mazkeret Batya"];
languageNameMapping["מזרעה"] = ["מזרעה","Mizra'a"];
languageNameMapping["מטולה"] = ["מטולה","Metula"];
languageNameMapping["מיתר"] = ["מיתר","Metar"];
languageNameMapping["מסעדה"] = ["מסעדה","Misada"];
languageNameMapping["מעיליא"] = ["מעיליא","Me'iliya"];
languageNameMapping["מעלה אדומים"] = ["מעלה אדומים","Ma'ale Edomim"];
languageNameMapping["מעלה אפרים"] = ["מעלה אפרים","Ma'ale Efraim"];
languageNameMapping["מעלה עירון"] = ["מעלה עירון","Ma'ale Eron"];
languageNameMapping["מעלות-תרשיחא"] = ["מעלות-תרשיחא","Ma'alot Tarshiha"];
languageNameMapping["מצפה רמון"] = ["מצפה רמון","Mitspe Ramon"];
languageNameMapping["משהד"] = ["משהד","Mash'had"];
languageNameMapping["נהריה"] = ["נהריה","Na'ariya"];
languageNameMapping["נחף"] = ["נחף","Nahaf"];
languageNameMapping["נס ציונה"] = ["נס ציונה","Nes Tsiyona"];
languageNameMapping["נצרת"] = ["נצרת","Natseret"];
languageNameMapping["נצרת עילית"] = ["נצרת עילית","Natseret Elit"];
languageNameMapping["נשר"] = ["נשר","Nesher"];
languageNameMapping["נתיבות"] = ["נתיבות","Netivot"];
languageNameMapping["נתניה"] = ["נתניה","Netanya"];
languageNameMapping["סאג'ור"] = ["סאג'ור","Sajor"];
languageNameMapping["סביון"] = ["סביון","Savyon"];
languageNameMapping["סח'נין"] = ["סח'נין","Sahnin"];
languageNameMapping["עומר"] = ["עומר","Omer"];
languageNameMapping["עיילבון"] = ["עיילבון","Ilabon"];
languageNameMapping["עילוט"] = ["עילוט","Ilut"];
languageNameMapping["עין מאהל"] = ["עין מאהל","En Ma'ahal"];
languageNameMapping["עכו"] = ["עכו","Ako"];
languageNameMapping["עמנואל"] = ["עמנואל","Emanuel"];
languageNameMapping["עספיא"] = ["עספיא","Esafiya"];
languageNameMapping["עפולה"] = ["עפולה","Afula"];
languageNameMapping["עראבה"] = ["עראבה","Arabe"];
languageNameMapping["ערד"] = ["ערד","Arad"];
languageNameMapping["ערערה"] = ["ערערה","Arara"];
languageNameMapping["ערערה-בנגב"] = ["ערערה-בנגב","Arara-Negev"];
languageNameMapping["פוריידיס"] = ["פוריידיס","Foridis"];
languageNameMapping["פסוטה"] = ["פסוטה","Pasota"];
languageNameMapping["פקיעין (בוקייעה)"] = ["פקיעין (בוקייעה)","Pki'in(Bokaiya)"];
languageNameMapping["פרדס חנה-כרכור"] = ["פרדס חנה-כרכור","Pardes Hana-Karkur"];
languageNameMapping["פרדסיה"] = ["פרדסיה","Pardesiya"];
languageNameMapping["פתח תקווה"] = ["פתח תקווה","Petah Tikva"];
languageNameMapping["צפת"] = ["צפת","Tsfat"];
languageNameMapping["קדומים"] = ["קדומים","Kdumim"];
languageNameMapping["קדימה-צורן"] = ["קדימה-צורן","Kadima-Tsoren"];
languageNameMapping["קלנסווה"] = ["קלנסווה","Kalnsua"];
languageNameMapping["קציר"] = ["קציר","Katsir"];
languageNameMapping["קצרין"] = ["קצרין","Katsrin"];
languageNameMapping["קרית אונו"] = ["קרית אונו","Kiryat Ono"];
languageNameMapping["קרית ארבע"] = ["קרית ארבע","Kiryat Arba"];
languageNameMapping["קרית אתא"] = ["קרית אתא","Kiryat Atta"];
languageNameMapping["קרית ביאליק"] = ["קרית ביאליק","Kiryat Biyalik"];
languageNameMapping["קרית גת"] = ["קרית גת","Kiryat Gat"];
languageNameMapping["קרית טבעון"] = ["קרית טבעון","Kiryat Tivon"];
languageNameMapping["קרית ים"] = ["קרית ים","Kiryat Yam"];
languageNameMapping["קרית יערים"] = ["קרית יערים","Kiryat Yearim"];
languageNameMapping["קרית מוצקין"] = ["קרית מוצקין","Kiryat Motskin"];
languageNameMapping["קרית מלאכי"] = ["קרית מלאכי","Kiryat Malahi"];
languageNameMapping["קרית עקרון"] = ["קרית עקרון","Kiryat Ekron"];
languageNameMapping["קרית שמונה"] = ["קרית שמונה","Kiryat Shmona"];
languageNameMapping["קרני שומרון"] = ["קרני שומרון","Kiryat Shomron"];
languageNameMapping["ראמה"] = ["ראמה","Rama"];
languageNameMapping["ראש העין"] = ["ראש העין","Rosh Ha'Ain"];
languageNameMapping["ראש פינה"] = ["ראש פינה","Rosh Pina"];
languageNameMapping["ראשון לציון"] = ["ראשון לציון","Rishon LeTsion"];
languageNameMapping["רהט"] = ["רהט","Rahat"];
languageNameMapping["רחובות"] = ["רחובות","Rehovot"];
languageNameMapping["ריינה"] = ["ריינה","Reyna"];
languageNameMapping["רכסים"] = ["רכסים","Rehasim"];
languageNameMapping["רמלה"] = ["רמלה","Ramle"];
languageNameMapping["רמת גן"] = ["רמת גן","RamAt Gan"];
languageNameMapping["רמת השרון"] = ["רמת השרון","Ramat HaSharon"];
languageNameMapping["רמת ישי"] = ["רמת ישי","Ramat Ishay"];
languageNameMapping["רעננה"] = ["רעננה","Ra'anana"];
languageNameMapping["שבלי - אום אל-גנם"] = ["שבלי - אום אל-גנם","Shabli-Um Al-Ganem"];
languageNameMapping["שגב-שלום"] = ["שגב-שלום","Segev-Shalom"];
languageNameMapping["שדרות"] = ["שדרות","Shderot"];
languageNameMapping["שוהם"] = ["שוהם","Shoham"];
languageNameMapping["שלומי"] = ["שלומי","Shlomi"];
languageNameMapping["שעב"] = ["שעב","Sha'ab"];
languageNameMapping["שפיר"] = ["שפיר","Shafir"];
languageNameMapping["שפרעם"] = ["שפרעם","Shfar'am"];
languageNameMapping["תל אביב - יפו"] = ["תל אביב - יפו","Tel Aviv-Yafo"];
languageNameMapping["תל מונד"] = ["תל מונד","Tel Mond"];
languageNameMapping["תל שבע"] = ["תל שבע","Tel Sheva"];


function generateCityPopulationTableData(){
    console.log("generateCityPopulationTableData" + " - יצירת טבלת ערים");
    d3.json("data-set-elections/electionAndEconomicData.json", function(error, data) {
        if (error) throw error;



        header_data = data.splice(0,3);
        tableHeaders = [
            [ "<b>מספר</b>" , "<b>עיר</b>" , "<b>אוכלוסיה</b>" ,"<b>קלאסטר</b>" ],
            [ "<b>Num</b>" , "<b>City</b>" , "<b>Population</b>" ,"<b>Cluster</b>"]
        ];

        var cityPopulationTableData = data.map(function(d,i){ return [i+1 ,d.city , d.population , d.cluster];}); //filtering data
        cityPopulationTableData.unshift(tableHeaders[language]);

        var table = document.getElementById("myTable");
        /*table.style.direction = direction;*/


        $("#myTable tr").remove(); //if table already exists - delete all rows

        var header = table.createTHead();
        var body   = table.createTBody();

        for(var i = 0; i < cityPopulationTableData.length ; i++){ //generating table rows
            var row = (i==0) ?  header.insertRow(-1) : body.insertRow(-1);
            row.setAttribute("class", "tableRow");
            row.setAttribute("id", "idRow");

            for (var j = 0; j < cityPopulationTableData[i].length ; j++) {
                var cell = row.insertCell(j);

                if (i>0 && j==1) { // row i==0 is the headers and j==1 is the city
                    cell.innerHTML = languageNameMapping[cityPopulationTableData[i][j]][language];
                }
                else{
                    cell.innerHTML = cityPopulationTableData[i][j];
                }
            }
        }



        var direction = "rtl"; // default
        var float = "right";
        var myWitdh = "266px";
        if (language == 0) { //hebrew
            direction = "rtl";
            float = "right";
            myWitdh = "266px";
        }else if (language == 1){ //english
            direction = "ltr";
            float = "left";
            myWitdh = "290px";
        }
        var tableAndFilter = document.getElementsByClassName('tableAndFilter')[0];
        tableAndFilter.style.float = float;
        tableAndFilter.style.width = myWitdh;

        table.style.direction = direction;

        var filter = document.getElementById('filter');
        filter.style.width = myWitdh;
        filter.style.direction = direction;
        table.setAttribute("width", "100%");
    });
}


$(function() {
    var text = $('#filter').val();
    $('#filter').keyup(function() {
        if ($('#filter').val() != text) {
            text = $('#filter').val();
            var rows = document.getElementById("myTable").rows;
            filterRows(text, rows);
        }
    });
});

function filterRows(text, rows) { //attach to 'changed()' event , and filter rows that doesnt contain form.input.innerText
    //iterate through all row while this is the LAST call to the function
    for (var i = 0; i < rows.length; ++i) {
        var keepRow = false;// keep row only if substring exist in the row
        for (var j = 0; j < rows[i].cells.length && !keepRow; ++j) {
            if ((j==1 || j==3 ) && rows[i].cells[j].innerHTML.toLowerCase().indexOf(text) !== -1){ //search in columns 1(city) and 3(cluster)
                keepRow = true;// found the substring in one of the columns
                if(text == '1' && rows[i].cells[j].innerHTML == '10'){ keepRow = false;}
            }
        }
        if (i != 0) {
            if (keepRow) {
                rows[i].style.display = "";
            } else {
                rows[i].style.display = "none";
            }
        }
    }
}
